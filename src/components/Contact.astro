---

---

<section id="contact" class="min-h-screen p-8 flex flex-col justify-center items-center">
  <h2 class="text-3xl font-semibold mb-4">Contacto</h2>
  <form class="max-w-md w-full space-y-4" id="contactForm">
    <input type="text" placeholder="Nombre" class="w-full p-3 rounded border dark:bg-gray-800 dark:border-gray-600" />
    <input type="email" placeholder="Email" class="w-full p-3 rounded border dark:bg-gray-800 dark:border-gray-600" />
    <textarea placeholder="Mensaje" rows="4" class="w-full p-3 rounded border dark:bg-gray-800 dark:border-gray-600"></textarea>
    <button type="submit" class="w-full py-3 bg-blue-600 text-white rounded hover:bg-blue-700">Enviar mensake</button>
  </form>
</section>

<script>
        const form = document.getElementById(
            "contactForm",
        ) as HTMLFormElement | null;
        const statusMessage = document.getElementById(
            "statusMessage",
        ) as HTMLElement | null;
        const loadingOverlay = document.getElementById("loadingOverlay");

        if (form) {
            form.addEventListener("submit", async (e) => {
                e.preventDefault();

                const data = {
                    nombre: (form.querySelector("#nombre") as HTMLInputElement)
                        .value,
                    email: (form.querySelector("#email") as HTMLInputElement)
                        .value,
                    mensaje: (
                        form.querySelector("#mensaje") as HTMLTextAreaElement
                    ).value,
                };

                if (statusMessage)
                    statusMessage.textContent = "Enviando mensaje...";
                if (loadingOverlay) {
                    loadingOverlay.classList.remove("hidden"); // mostrar overlay
                    loadingOverlay.classList.add("flex"); // activa flex
                }

                try {
                    const resp = await fetch(
                        "https://gbackend.sergioizq.es/api/auth/contactoForm",
                        {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify(data),
                        },
                    );

                    if (!resp.ok) throw new Error("Error al enviar");

                    const result = await resp.json();
                    if (statusMessage)
                        statusMessage.textContent = "✅ " + result.mensaje;
                    form.reset();
                } catch (error) {
                    if (statusMessage)
                        statusMessage.textContent =
                            "❌ Hubo un error al enviar el mensaje.";
                    console.error(error);
                } finally {
                    if (loadingOverlay) {
                        loadingOverlay.classList.add("hidden"); // oculta overlay
                        loadingOverlay.classList.remove("flex"); // desactiva flex
                    }
                }
            });
        }
    </script>